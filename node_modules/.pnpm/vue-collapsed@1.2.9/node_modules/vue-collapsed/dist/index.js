"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),M="--vc-auto-duration",k=`height var(${M}) cubic-bezier(0.33, 1, 0.68, 1)`,p={padding:0},q={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function $(n){return n.value?parseFloat(getComputedStyle(n.value).height):0}function H(n){var a;return{height:`${((a=n.value)==null?void 0:a.scrollHeight)??0}px`}}function R(n){if(!n.value)return{};const{transition:a}=getComputedStyle(n.value);return a==="all 0s ease 0s"?{transition:k}:{transition:a}}function F(n){if(!n.value)return!0;const{transition:a}=getComputedStyle(n.value);return matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}const z=e.defineComponent({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:a}){const c=n,o=e.toRef(c,"when"),i=e.toRef(c,"baseHeight"),v=e.computed(()=>({overflow:"hidden",height:`${i.value}px`})),g=e.computed(()=>({...p,...i.value===0?{display:"none"}:v.value})),l=e.ref(null),h=e.ref(o.value?"expanded":"collapsed"),s=t=>h.value=t,f=e.shallowRef({}),u=t=>f.value=t,d=t=>u({...f.value,...t}),m=e.ref(300),y=e.computed(()=>({[M]:`${m.value}ms`}));function x(){u(p),s("expanded"),a("expanded")}function w(){u(g.value),s("collapsed"),a("collapsed")}function _(t){var r;t.target===l.value&&t.propertyName==="height"&&(o.value?((r=l.value)==null?void 0:r.scrollHeight)===$(l)&&x():i.value===$(l)&&w())}return e.onMounted(()=>{if(!l.value)return;o.value||i.value!==0||u(q);const t=function(C=0){if(C===0)return 0;const b=C/36,S=Math.round(10*(4+15*b**.25+b/5));return Number.isFinite(S)?S:0}(l.value.scrollHeight-i.value);var r;r=t<=0?300:t,m.value=r,u(o.value?p:g.value)}),e.watch(o,t=>{if(t){if(F(l))return x();s("expanding"),a("expand"),u({...p,...v.value,...y.value}),requestAnimationFrame(()=>{d({...H(l),...R(l),willChange:"height"})})}else{if(F(l))return w();s("collapsing"),a("collapse"),d({...y.value,...H(l)}),requestAnimationFrame(()=>{d({...v.value,...R(l),willChange:"height"})})}}),e.watch(i,t=>{o.value||d(t>0?{display:void 0,height:`${t}px`}:{display:"none"})}),(t,r)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.as),{ref_key:"collapseRef",ref:l,style:e.normalizeStyle(f.value),onTransitionend:_,"data-collapse":h.value},{default:e.withCtx(()=>[e.renderSlot(t.$slots,"default",e.normalizeProps(e.guardReactiveProps({state:h.value})))]),_:3},40,["style","data-collapse"]))}});exports.Collapse=z;
